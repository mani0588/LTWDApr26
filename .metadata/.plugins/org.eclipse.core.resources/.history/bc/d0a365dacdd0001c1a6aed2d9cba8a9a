package seleniumPack;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;

public class Abhibus extends DriverUtil {
	public static void main(String[] args) {

		WebDriver driver = getDriver("https://www.abhibus.com/");

		String fromCity = "Chennai";
		String toCity = "Bangalore";

		driver.findElement(By.xpath("//input[@id='source']")).sendKeys(fromCity);
		driver.findElement(By.xpath("//li[text()='" + fromCity + "']")).click();

		driver.findElement(By.xpath("//input[@id='destination']")).sendKeys(toCity);
		driver.findElement(By.xpath("//li[text()='" + toCity + "']")).click();

		driver.findElement(By.xpath("//input[@id='datepicker1']")).click();
		driver.findElement(By.xpath("//td[contains(@class,'ui-datepicker-today')]/a")).click();
		driver.findElement(By.xpath("//a[text()='Search']")).click();

		// p[contains(text(),'Seats Available')]
		// span[text()='Select Seat']
		// div[@class='borderdtd']//li[not(contains(@class,'unavailable')) and
		// not(@class='noseat')]/a

		String seatsAvailableExpected = driver.findElement(By.xpath("//p[contains(text(),'Seats Available')]"))
				.getText();
		seatsAvailableExpected = seatsAvailableExpected.split(" ")[0];
		int seatsAvailableExpectedInt = Integer.parseInt(seatsAvailableExpected);

		driver.findElement(By.xpath("//span[text()='Select Seat']")).click();

		int totalAvailableSeats = driver.findElements(By
				.xpath("//div[@class='borderdtd']//li[not(contains(@class,'unavailable')) and not(@class='noseat')]/a"))
				.size();

		System.out.println(seatsAvailableExpectedInt + "" + totalAvailableSeats);
		if (seatsAvailableExpectedInt == totalAvailableSeats) {
			System.out.println("Test Passed");
		} else {
			System.out.println("Test Failed");
		}

		driver.close();

//		
//		driver.findElement(By.xpath("//div[@id='ui-datepicker-div']")).findElement(By.xpath("//a[@title='Next']"))
//				.click();
//
//		driver.findElement(By.xpath("//td[@data-month='5']")).findElement(By.xpath("//a[text()='6']")).click();

		driver.close();
	}
}
